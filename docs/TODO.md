# TODO

## Done

- ‚úÖ rename current netlify site `npc->cli` -> `the-last-redoubt`
  - https://the-last-redoubt.netlify.app/test/
  - https://staging.lastredoubt.co
- ‚úÖ connect new netlify deploy, named `npc-cli`
  - https://npc-cli.netlify.app/
- ‚úÖ fix initial font load: svg fontawesome
- ‚úÖ start new desktop layout i.e. with right-pane
- ‚úÖ use system fonts instead of web fonts

- ‚úÖ add mobile layout i.e. with lower-pane
- ‚úÖ mobile layout fixes

- ‚úÖ easier to close Nav
- ‚úÖ easier to close Viewer

- ‚úÖ Viewer has Tabs
  - try avoid "cannot update component" error
- ‚úÖ fix Viewer side-by-side Tabs minimize in large viewport

- ‚úÖ fix layout height on mobile device

- ‚úÖ useSiteStore drives Nav
- ‚úÖ open Viewer closes Nav
- ‚úÖ open Nav darkens Main
- ‚úÖ Viewer Tabs has id `{articleKey}-viewer-tabs` (for persist)

- ‚úÖ Tabs has controls
  - ‚úÖ small viewport ui
  - ‚úÖ large viewport ui
  - ‚úÖ disable/enable
  - ‚úÖ reset
  - ‚úÖ maximise/minimise
    - by expanding Viewer

- ‚úÖ can reset while paused
- ‚úÖ close Viewer disables Tabs
- ‚úÖ can max/min while paused
- ‚úÖ can make Viewer larger

- ‚úÖ fix max Viewer in large viewport
- ‚úÖ Viewer tabs does not need to know articleKey
- ‚úÖ fix darken overlay in small viewport
- ‚úÖ move Controls outside Tabs as ViewerControls
- ‚úÖ move Toggle inside ViewerControls
- ‚úÖ ViewerControls always visible
- ‚úÖ ViewerControls buttons/Toggle not positioned absolute
- ‚úÖ remember if Viewer is open and trigger client-side

- ‚úÖ can drag Viewer bar
  - ‚úÖ can drag "drag-bar" instead
  - ‚úÖ drag to 0% and let go => sets viewOpen `false`
  - ‚úÖ when viewOpen false can start dragging
  - ‚úÖ add overlay when dragging (body can be covered by iframe)
  - ‚úÖ get resize working on mobile
  - ‚ùå CSS var --view-size driven by useSite

- ‚úÖ Couldn't scroll iframe in `<Comments>`
  - Problem disappeared after restarting Chrome

- ‚úÖ Nav icons for Blog, Dev, Help, About

  - Blog: `robot`
  - Dev: `code`
  - Help: `circle-question`
  - About: `circle-info`

- ‚ùå toasts indicate loading assets/components

- ‚úÖ copy over sh folder
  - comment out references to e.g. World, NPC, Geom, PanZoom,
- ‚úÖ rename src/js -> src/npc-cli
- ‚úÖ add Terminal
  - ‚úÖ add files to src/npc-cli/terminal
  - ‚úÖ move tabs inside npc-cli
  - ‚úÖ can see component in Tabs

- ‚úÖ ensure Tab components are lazy-loaded

## WIP

- ‚ùå pivot to NPC fixes in repo `the-last-redoubt`

- ‚úÖ add `npc-cli/geom`
- ‚úÖ starting migrating `npc-cli/graph`

- üöß setup SVG symbols (simplify existing system)
  - ‚úÖ hull symbol
  - üöß non-hull symbol
  - `yarn symbols-meta`
  - script watches files
- üöß given def `gms` construct each `gm.pngRect`
  - i.e. `layout.items[0].pngRect` (hull symbol)
  - i.e. from symbolLookup generated by `yarn svg-meta`

- (hull) walls -> quads

- world editor in new repo
- geomorph editor in new repo

- ‚úÖ smaller collapsed nav on mobile
- fix multi-touch flicker on drag
  - setup local dev on phone to debug this
- can add Tabs via links in blog posts
  - without remounting other tabs!
- open Viewer should enable Tabs initially
- can press Escape/Enter to pause/unpause
- how does shell function versioning work in sh/scripts.ts?
- fix vertical tab drag on mobile
  - need repro

- iOS issues:
  - ‚úÖ Nav wasn't centred
  - ‚úÖ Viewer initially partially occluded
  - seems fixed on iPhone 13

- more decor images
  - `computer-2`
  - `speaker-1`
  - `communicator-1`
  - `fabricator-1`
- place decor points on many tables
- more tables in 301
- more tables in 101
- World WebGL rendering pauses on pause Tabs

- install cypress to test terminal
- netlify site `npc-cli` at https://lastredoubt.co
